interface swarm {
    use wasi:io/streams@0.2.2.{input-stream, output-stream};
    use wasi:io/poll@0.2.2.{pollable};

    peer-id: func() -> string;    
    
    accept-stream: func(protocol: string) -> incoming-streams;    

    resource incoming-streams {
        // return (peer-id, input-stream, output-stream)
        next: func() -> result<tuple<string, input-stream, output-stream>, string>;
        subscribe: func() -> pollable;
    }
}